(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03f33a78"],{"0a40":function(e,t,a){},"0fea":function(e,t,a){"use strict";var r=a("3953"),s=a.n(r);s.a},"32f6":function(e,t,a){"use strict";var r=a("0a40"),s=a.n(r);s.a},3953:function(e,t,a){},"425c":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-layout-popup"},[a("div",{staticClass:"header"},[a("van-icon",{attrs:{name:"arrow-left"},on:{click:e.back}}),e._v(" "+e._s(e.title)+" ")],1),a("div",{staticClass:"body"},[e.tabs.length?[a("van-tabs",{on:{change:e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabs,(function(e,t){return a("van-tab",{key:t,attrs:{name:e.name,title:e.title}})})),1)]:e._e(),e._t("default")],2)])},s=[],o={props:{tabs:{type:Array,default:function(){return[]}},title:{type:[String,Array],default:""}},data:function(){return{activeName:""}},methods:{back:function(){this.$emit("back")},handleClick:function(e){this.$emit("change",e)}}},n=o,i=(a("0fea"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"74085b72",null);t["a"]=l.exports},"4d41":function(e,t,a){},a434:function(e,t,a){"use strict";var r=a("23e7"),s=a("23cb"),o=a("a691"),n=a("50c4"),i=a("7b0b"),l=a("65f0"),d=a("8418"),p=a("1dde"),c=a("ae40"),u=p("splice"),f=c("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,v=9007199254740991,y="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u||!f},{splice:function(e,t){var a,r,p,c,u,f,b=i(this),w=n(b.length),g=s(e,w),_=arguments.length;if(0===_?a=r=0:1===_?(a=0,r=w-g):(a=_-2,r=h(m(o(t),0),w-g)),w+a-r>v)throw TypeError(y);for(p=l(b,r),c=0;c<r;c++)u=g+c,u in b&&d(p,c,b[u]);if(p.length=r,a<r){for(c=g;c<w-r;c++)u=c+r,f=c+a,u in b?b[f]=b[u]:delete b[f];for(c=w;c>w-r+a;c--)delete b[c-1]}else if(a>r)for(c=w-r;c>g;c--)u=c+r-1,f=c+a-1,u in b?b[f]=b[u]:delete b[f];for(c=0;c<a;c++)b[c+g]=arguments[c+2];return b.length=w-r+a,p}})},a9a5:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",class:e.classs,attrs:{model:e.data,rules:e.rules,"label-width":e.labelWidth,"label-position":e.labelPosition}},e._l(e.form,(function(t,r){return a("el-form-item",{key:r,class:["form-item__"+t.prop,"form-item__"+t.type],attrs:{label:t.label,prop:t.prop}},["text"===t.type?[Array.isArray(t.value)?e._l(t.value,(function(t,r){return a("label",{key:r},[e._v(" "+e._s(t)+" ")])})):[e._v(" "+e._s(t.prop?e.data[t.prop]:t.value)+" ")]]:e._e(),"input"===t.type||"password"===t.type?[a("el-input",{attrs:{type:"input"===t.type?"text":t.type,placeholder:t.placeholder,autocomplete:"new-password"},on:{input:t.input},scopedSlots:e._u([t.unit?{key:"suffix",fn:function(){return[e._v(" "+e._s(t.unit)+" ")]},proxy:!0}:null],null,!0),model:{value:e.data[t.prop],callback:function(a){e.$set(e.data,t.prop,a)},expression:"data[formItem.prop]"}})]:e._e(),"textarea"===t.type?[a("el-input",{attrs:{type:"textarea",placeholder:t.placeholder,rows:5},model:{value:e.data[t.prop],callback:function(a){e.$set(e.data,t.prop,a)},expression:"data[formItem.prop]"}})]:e._e(),"radio"===t.type?e._l(t.data,(function(r,s){return a("el-radio",{key:s,attrs:{label:r.label},model:{value:e.data[t.prop],callback:function(a){e.$set(e.data,t.prop,a)},expression:"data[formItem.prop]"}},[e._v(" "+e._s(r.text?r.text:r.label)+" ")])})):e._e(),"date"===t.type?[a("el-date-picker",{attrs:{type:"date",placeholder:t.placeholder,format:t.valueFormat,"value-format":t.valueFormat||"yyyy-MM-dd"},model:{value:e.data[t.prop],callback:function(a){e.$set(e.data,t.prop,a)},expression:"data[formItem.prop]"}})]:e._e(),"select"===t.type?[a("el-select",{attrs:{placeholder:t.placeholder},model:{value:e.data[t.prop],callback:function(a){e.$set(e.data,t.prop,a)},expression:"data[formItem.prop]"}},e._l(t.data,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]:e._e(),"avatar"===t.type?[a("van-uploader",{ref:"avatar",refInFor:!0,attrs:{"max-count":1,"preview-full-image":!1,"after-read":t.upload},on:{delete:e.deleteImg},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[a("div",{staticClass:"avatar-mask"},[e._v(e._s(t.placeholder||"点击更换头像"))])])]:e._e(),"action"===t.type?[a("div",{staticClass:"btn-group",style:{"text-align":t.position||"center"}},e._l(t.data,(function(t,r){return a("el-button",{key:r,class:t.class,attrs:{type:t.type,icon:t.icon},on:{click:function(a){return e.handelOperation(t)}}},[e._v(" "+e._s(t.text)+" ")])})),1)]:e._e(),"slot"===t.type?["after"===t.prop?[e._t("after")]:e._e()]:e._e()],2)})),1)},s=[],o=(a("99af"),a("4160"),a("a434"),a("159b"),{name:"CForm",props:{data:{required:!0,type:Object,default:function(){return{}}},form:{required:!0,type:Array,default:function(){return[]}},rules:{type:Object,default:function(){return{}}},labelWidth:{type:String,default:"80px"},classs:{type:String},labelPosition:{type:String,default:"right"}},data:function(){return{avatar:"",countryCodeList:[],fileList:[]}},watch:{form:function(){this.reset()}},methods:{a:function(e){console.log(e)},reset:function(){var e=this;this.$nextTick((function(){if(e.$refs.gt){var t=[].concat(e.$refs.gt);t.forEach((function(e){e.init()}))}}))},handelOperation:function(e){this.validator(e)},validator:function(e){var t=this;"undefined"===typeof e.validator||e.validator?this.$refs.form.validate((function(a){if(a){var r=JSON.parse(JSON.stringify(t.data));"function"===typeof e.handler&&e.handler(a,r)}})):"function"===typeof e.handler&&e.handler()},validatateGeetest:function(e){var t=this,a=this.findItem("type","smscode"),r=a.item;4!==r.state?this.$refs.gt.updateCheckState(!0):r.propPhone?r.phone?e(!0):this.$message("手机号不能为空"):this.$refs.resetPwdForm.validateField([r.propPhone],(function(a){a?t.$message(t.message):e(!0)}))},geetestValidate:function(e){console.log(e)},resetFields:function(){var e=this.$refs.form;e.clearValidate(),e.resetFields()},deleteImg:function(){console.log(this.$refs.avatar),this.$refs.avatar[0].chooseFile()},findItem:function(e,t){for(var a=0;a<this.form.length;a++){var r=this.form[a];if(r[e]===t)return{index:a,item:r}}},updateField:function(e,t,a){var r=this;"del"===a?this.fileList.splice(e,1):this.$set(this.fileList,e,t),this.form.forEach((function(e){"avatar"===e.type&&(r.data[e.prop]=[].concat(r.fileList))}))}}}),n=o,i=(a("cb17"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"3a6121ee",null);t["a"]=l.exports},cb17:function(e,t,a){"use strict";var r=a("4d41"),s=a.n(r);s.a},f934:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal-safe"},[a("c-popup-layout",{attrs:{title:"账号安全"},on:{back:function(t){return e.$router.push({name:"Personal"})}}},[a("div",{staticClass:"form-box"},[a("div",{staticClass:"form-content"},[a("c-form",{ref:"baseForm",attrs:{data:e.baseInfo,form:e.baseInfoForm,"label-width":"100px"}})],1)]),a("div",{staticClass:"form-box"},[a("div",{staticClass:"form-title"},[a("span",{staticStyle:{color:"#E91E63"}},[e._v("l")]),e._v("登录密码")]),a("div",{staticClass:"form-content"},[a("c-form",{attrs:{data:e.loginPwd,form:e.loginPwdForm,rules:e.loginPwdRules,"label-width":"100px"}})],1)]),a("div",{staticClass:"form-box"},[a("div",{staticClass:"form-title"},[a("span",{staticStyle:{color:"#FF9900"}},[e._v("l")]),e._v("支付密码")]),a("div",{staticClass:"form-content"},[a("c-form",{attrs:{data:e.payPwd,form:e.payPwdForm,rules:e.payPwdRules,"label-width":"100px"}})],1)]),a("div",{staticClass:"form-box"},[a("div",{staticClass:"form-title"},[a("span",{staticStyle:{color:"#5AB963"}},[e._v("l")]),e._v("提现银行卡")]),a("div",{staticClass:"form-content"},[a("c-form",{attrs:{data:e.bankcard,form:e.bankcardForm,rules:e.bankcardRules,"label-width":"100px"}})],1)])])],1)},s=[],o=a("425c"),n=a("a9a5"),i={components:{"c-form":n["a"],"c-popup-layout":o["a"]},data:function(){return{fileList:[],baseInfo:{avatar:"",username:""},baseInfoForm:[{type:"avatar",prop:"avatar",upload:this.afterRead},{type:"input",label:"修改昵称:",prop:"username"},{type:"action",data:[{text:"确认修改",type:"primary",handler:this.handleBaseInfo}]}],loginPwd:{password:"",new_password:"",com_password:""},loginPwdForm:[{type:"password",label:"原密码:",prop:"password"},{type:"password",label:"新密码:",prop:"new_password"},{type:"password",label:"确认密码:",prop:"com_password"},{type:"action",data:[{text:"确认修改",type:"primary",handler:this.handleLoginPwd}]}],loginPwdRules:{password:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"}],configrmPassword:[{validator:this.validateLoginPwd,message:"两次密码不一致",trigger:"blur"}]},payPwd:{pay_password:"",new_password:"",com_password:""},payPwdForm:[{type:"password",label:"原密码:",prop:"pay_password"},{type:"password",label:"新密码:",prop:"new_password"},{type:"password",label:"确认密码:",prop:"com_password"},{type:"action",data:[{text:"确认修改",type:"primary",handler:this.handlePayPwd}]}],payPwdRules:{password:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"}],configrmPassword:[{validator:this.validatePayPwd,message:"两次密码不一致",trigger:"blur"}]},bankcard:{bank_name:"",bank_user:"",bank_num:"",com_bank_num:""},bankcardForm:[{type:"select",label:"开户银行:",prop:"bank_name",data:[{label:"中国银行",value:"中国银行"},{label:"农业银行",value:"农业银行"}]},{type:"input",label:"持卡人姓名:",prop:"bank_user"},{type:"input",label:"银行卡号:",prop:"bank_num"},{type:"input",label:"确认银行卡号:",prop:"com_bank_num"},{type:"action",data:[{text:"确认修改",type:"primary",handler:this.handleBankcardPwd}]}],bankcardRules:{name:[{required:!0,message:"持卡人姓名不能为空",trigger:"blur"}],cardId:[{required:!0,message:"银行卡号不能为空",trigger:"blur"}],configrmCardId:[{validator:this.validateCardId,message:"银行卡号不一致",trigger:"blur"}]}}},methods:{afterRead:function(e,t){var a=this,r=e.file,s=t.index;this.$refs.baseForm.updateField(s,{},"del");var o=new FormData;o.append("file",r),o.append("is_user",1),this.$fetch.post("/Home/Create/upload_ajax_img",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;a.$refs.baseForm.updateField(s,{url:t.src,id:t.image_id})})).catch((function(){a.$refs.baseForm.updateField(s,{status:"failed",message:"上传失败"})}))},handleLoginPwd:function(e,t){e&&this.updateInfo(t,"登录修改成功")},handlePayPwd:function(e,t){e&&this.updateInfo(t,"支付密码修改成功")},handleBankcardPwd:function(e,t){e&&this.updateInfo(t,"银行卡信息修改成功")},validateLoginPwd:function(e,t,a){t!==this.loginPwd.newPassword?a(new Error):a()},validatePayPwd:function(e,t,a){t!==this.payPwd.newPassword?a(new Error):a()},validateCardId:function(e,t,a){t!==this.bankcard.cardId?a(new Error):a()},handleBaseInfo:function(e,t){e&&this.updateInfo({username:t.username},"昵称修改成功")},updateInfo:function(e,t){var a=this;this.$fetch.form("/Home/User/upuserinfo",e).then((function(){a.$store.dispatch("GetUserInfo"),a.$notify({type:"success",message:t})})).catch((function(e){var t=e.msg;a.$notify({type:"danger",message:t})}))}}},l=i,d=(a("32f6"),a("2877")),p=Object(d["a"])(l,r,s,!1,null,"0c69533b",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-03f33a78.c85829df.js.map